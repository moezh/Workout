---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import Workout from "../../components/Workout";

export async function getStaticPaths() {
  const workouts = await getCollection("workouts");
  const exercises = await getCollection("exercises");
  return workouts.map((workout) => ({
    params: { workout_id: workout.data.id },
    props: { workout, exercises },
  }));
}

const { workout, exercises } = Astro.props;
---

<Layout title={workout.data.name} description={workout.data.description}>
  <div class="banner">
    <div class="container pt-8 pb-16">
      <h1>{workout.data.type}</h1>
      <h2>{workout.data.name}</h2>
      <p>{workout.data.description}</p>
    </div>
  </div>
  <div class="container pt-4">
    <div class="h-[225px] overflow-hidden rounded-lg">
      <Image
        src={`/assets/workouts/images/${workout.data.id}.jpg`}
        alt={workout.data.name}
        width={1000}
        height={750}
        class="relative -top-[0px] sm:-top-[50px] md:-top-[100px] lg:-top-[150px] mx-auto"
      />
    </div>
  </div>
  <div class="container pt-4">
    <Workout workout={workout} exercises={exercises} client:load />
  </div>
</Layout>
